<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    </head>
    <body>
        <canvas style="border: 1px solid black; background-color: grey; " width="600" height="300"></canvas>
    </body>
    <script type="text/javascript">

        function drawPieChart(context, results, radius, centerX, centerY){
            var total = results.reduce(function(sum, choice) {return sum + choice.count;}, 0);

            var currentAngle = (-0.5 * Math.PI);
            var angles = [];
            results.forEach(function(result, index) {
                var startAngle = currentAngle;
                var sliceAngle = (result.count / total) * 2 * Math.PI;
                var endAngle = currentAngle + sliceAngle;
                angles.push({startAngle: startAngle, endAngle: endAngle});
                currentAngle =  endAngle;
            });


            var completed = 0;
            angles.forEach(function(result, index){
                var color = results[index].color;
                var difference = result.endAngle - result.startAngle;
                var step = Math.min(0.03, difference * 0.03);

                var radians = 30*(Math.PI/180);
                var startAngle = result.startAngle - radians;
                var endAngle = startAngle;
                var doneAnimation = false;
                var interval = setInterval(function(){

                    if(index == 0)
                        context.clearRect(0, 0, 600, 300);

                    context.save();
                    context.translate(centerX, centerY);     
                    context.beginPath();
                    context.arc(0,0, radius, Math.min(startAngle, result.startAngle), Math.min(endAngle, result.endAngle));
                    context.lineTo(0,0);
                    context.fillStyle = color;
                    context.fill();
                    context.restore();

                    if(doneAnimation == false
                    && result.endAngle <= endAngle
                    && startAngle >= result.startAngle){
                        doneAnimation = true;
                        completed += difference;
                    }

                    if(completed >= Math.PI*2){
                        clearInterval(interval);
                    }

                    startAngle += step/2;
                    endAngle += step;
                }, 30);
            });
        }

        var results = [
            {name: "Satisfied", count: 1043, color: "lightblue"},
            {name: "Neutral", count: 563, color: "lightgreen"},
            {name: "Unsatisfied", count: 510, color: "pink"},
            {name: "No comment", count: 175, color: "silver"}
        ];

        var context = document.querySelector("canvas").getContext("2d");
        drawPieChart(context, results, 100, 150, 150);
    </script>
</html>